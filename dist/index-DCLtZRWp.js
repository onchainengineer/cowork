import{aZ as Xe,a_ as Ye,a$ as Ke,b0 as et}from"./main-D4-rBj0Y.js";class Q{constructor(t){this.counter=0,this.metadataRegistry=t?.metadata??Ye,this.target=t?.target??"draft-2020-12",this.unrepresentable=t?.unrepresentable??"throw",this.override=t?.override??(()=>{}),this.io=t?.io??"output",this.seen=new Map}process(t,r={path:[],schemaPath:[]}){var n;const a=t._zod.def,s={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},i=this.seen.get(t);if(i)return i.count++,r.schemaPath.includes(t)&&(i.cycle=r.path),i.schema;const o={schema:{},count:1,cycle:void 0,path:r.path};this.seen.set(t,o);const d=t._zod.toJSONSchema?.();if(d)o.schema=d;else{const p={...r,schemaPath:[...r.schemaPath,t],path:r.path},k=t._zod.parent;if(k)o.ref=k,this.process(k,p),this.seen.get(k).isParent=!0;else{const y=o.schema;switch(a.type){case"string":{const c=y;c.type="string";const{minimum:u,maximum:f,format:v,patterns:g,contentEncoding:_}=t._zod.bag;if(typeof u=="number"&&(c.minLength=u),typeof f=="number"&&(c.maxLength=f),v&&(c.format=s[v]??v,c.format===""&&delete c.format),_&&(c.contentEncoding=_),g&&g.size>0){const O=[...g];O.length===1?c.pattern=O[0].source:O.length>1&&(o.schema.allOf=[...O.map(R=>({...this.target==="draft-7"||this.target==="draft-4"||this.target==="openapi-3.0"?{type:"string"}:{},pattern:R.source}))])}break}case"number":{const c=y,{minimum:u,maximum:f,format:v,multipleOf:g,exclusiveMaximum:_,exclusiveMinimum:O}=t._zod.bag;typeof v=="string"&&v.includes("int")?c.type="integer":c.type="number",typeof O=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(c.minimum=O,c.exclusiveMinimum=!0):c.exclusiveMinimum=O),typeof u=="number"&&(c.minimum=u,typeof O=="number"&&this.target!=="draft-4"&&(O>=u?delete c.minimum:delete c.exclusiveMinimum)),typeof _=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(c.maximum=_,c.exclusiveMaximum=!0):c.exclusiveMaximum=_),typeof f=="number"&&(c.maximum=f,typeof _=="number"&&this.target!=="draft-4"&&(_<=f?delete c.maximum:delete c.exclusiveMaximum)),typeof g=="number"&&(c.multipleOf=g);break}case"boolean":{const c=y;c.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{this.target==="openapi-3.0"?(y.type="string",y.nullable=!0,y.enum=[null]):y.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{y.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{const c=y,{minimum:u,maximum:f}=t._zod.bag;typeof u=="number"&&(c.minItems=u),typeof f=="number"&&(c.maxItems=f),c.type="array",c.items=this.process(a.element,{...p,path:[...p.path,"items"]});break}case"object":{const c=y;c.type="object",c.properties={};const u=a.shape;for(const g in u)c.properties[g]=this.process(u[g],{...p,path:[...p.path,"properties",g]});const f=new Set(Object.keys(u)),v=new Set([...f].filter(g=>{const _=a.shape[g]._zod;return this.io==="input"?_.optin===void 0:_.optout===void 0}));v.size>0&&(c.required=Array.from(v)),a.catchall?._zod.def.type==="never"?c.additionalProperties=!1:a.catchall?a.catchall&&(c.additionalProperties=this.process(a.catchall,{...p,path:[...p.path,"additionalProperties"]})):this.io==="output"&&(c.additionalProperties=!1);break}case"union":{const c=y,u=a.discriminator!==void 0,f=a.options.map((v,g)=>this.process(v,{...p,path:[...p.path,u?"oneOf":"anyOf",g]}));u?c.oneOf=f:c.anyOf=f;break}case"intersection":{const c=y,u=this.process(a.left,{...p,path:[...p.path,"allOf",0]}),f=this.process(a.right,{...p,path:[...p.path,"allOf",1]}),v=_=>"allOf"in _&&Object.keys(_).length===1,g=[...v(u)?u.allOf:[u],...v(f)?f.allOf:[f]];c.allOf=g;break}case"tuple":{const c=y;c.type="array";const u=this.target==="draft-2020-12"?"prefixItems":"items",f=this.target==="draft-2020-12"||this.target==="openapi-3.0"?"items":"additionalItems",v=a.items.map((R,Qe)=>this.process(R,{...p,path:[...p.path,u,Qe]})),g=a.rest?this.process(a.rest,{...p,path:[...p.path,f,...this.target==="openapi-3.0"?[a.items.length]:[]]}):null;this.target==="draft-2020-12"?(c.prefixItems=v,g&&(c.items=g)):this.target==="openapi-3.0"?(c.items={anyOf:v},g&&c.items.anyOf.push(g),c.minItems=v.length,g||(c.maxItems=v.length)):(c.items=v,g&&(c.additionalItems=g));const{minimum:_,maximum:O}=t._zod.bag;typeof _=="number"&&(c.minItems=_),typeof O=="number"&&(c.maxItems=O);break}case"record":{const c=y;c.type="object",(this.target==="draft-7"||this.target==="draft-2020-12")&&(c.propertyNames=this.process(a.keyType,{...p,path:[...p.path,"propertyNames"]})),c.additionalProperties=this.process(a.valueType,{...p,path:[...p.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{const c=y,u=Ke(a.entries);u.every(f=>typeof f=="number")&&(c.type="number"),u.every(f=>typeof f=="string")&&(c.type="string"),c.enum=u;break}case"literal":{const c=y,u=[];for(const f of a.values)if(f===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof f=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");u.push(Number(f))}else u.push(f);if(u.length!==0)if(u.length===1){const f=u[0];c.type=f===null?"null":typeof f,this.target==="draft-4"||this.target==="openapi-3.0"?c.enum=[f]:c.const=f}else u.every(f=>typeof f=="number")&&(c.type="number"),u.every(f=>typeof f=="string")&&(c.type="string"),u.every(f=>typeof f=="boolean")&&(c.type="string"),u.every(f=>f===null)&&(c.type="null"),c.enum=u;break}case"file":{const c=y,u={type:"string",format:"binary",contentEncoding:"binary"},{minimum:f,maximum:v,mime:g}=t._zod.bag;f!==void 0&&(u.minLength=f),v!==void 0&&(u.maxLength=v),g?g.length===1?(u.contentMediaType=g[0],Object.assign(c,u)):c.anyOf=g.map(_=>({...u,contentMediaType:_})):Object.assign(c,u);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{const c=this.process(a.innerType,p);this.target==="openapi-3.0"?(o.ref=a.innerType,y.nullable=!0):y.anyOf=[c,{type:"null"}];break}case"nonoptional":{this.process(a.innerType,p),o.ref=a.innerType;break}case"success":{const c=y;c.type="boolean";break}case"default":{this.process(a.innerType,p),o.ref=a.innerType,y.default=JSON.parse(JSON.stringify(a.defaultValue));break}case"prefault":{this.process(a.innerType,p),o.ref=a.innerType,this.io==="input"&&(y._prefault=JSON.parse(JSON.stringify(a.defaultValue)));break}case"catch":{this.process(a.innerType,p),o.ref=a.innerType;let c;try{c=a.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}y.default=c;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{const c=y,u=t._zod.pattern;if(!u)throw new Error("Pattern not found in template literal");c.type="string",c.pattern=u.source;break}case"pipe":{const c=this.io==="input"?a.in._zod.def.type==="transform"?a.out:a.in:a.out;this.process(c,p),o.ref=c;break}case"readonly":{this.process(a.innerType,p),o.ref=a.innerType,y.readOnly=!0;break}case"promise":{this.process(a.innerType,p),o.ref=a.innerType;break}case"optional":{this.process(a.innerType,p),o.ref=a.innerType;break}case"lazy":{const c=t._zod.innerType;this.process(c,p),o.ref=c;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}case"function":{if(this.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema");break}}}}const l=this.metadataRegistry.get(t);return l&&Object.assign(o.schema,l),this.io==="input"&&E(t)&&(delete o.schema.examples,delete o.schema.default),this.io==="input"&&o.schema._prefault&&((n=o.schema).default??(n.default=o.schema._prefault)),delete o.schema._prefault,this.seen.get(t).schema}emit(t,r){const n={cycles:r?.cycles??"ref",reused:r?.reused??"inline",external:r?.external??void 0},a=this.seen.get(t);if(!a)throw new Error("Unprocessed schema. This is a bug in Zod.");const s=m=>{const p=this.target==="draft-2020-12"?"$defs":"definitions";if(n.external){const u=n.external.registry.get(m[0])?.id,f=n.external.uri??(g=>g);if(u)return{ref:f(u)};const v=m[1].defId??m[1].schema.id??`schema${this.counter++}`;return m[1].defId=v,{defId:v,ref:`${f("__shared")}#/${p}/${v}`}}if(m[1]===a)return{ref:"#"};const y=`#/${p}/`,c=m[1].schema.id??`__schema${this.counter++}`;return{defId:c,ref:y+c}},i=m=>{if(m[1].schema.$ref)return;const p=m[1],{ref:k,defId:y}=s(m);p.def={...p.schema},y&&(p.defId=y);const c=p.schema;for(const u in c)delete c[u];c.$ref=k};if(n.cycles==="throw")for(const m of this.seen.entries()){const p=m[1];if(p.cycle)throw new Error(`Cycle detected: #/${p.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const m of this.seen.entries()){const p=m[1];if(t===m[0]){i(m);continue}if(n.external){const y=n.external.registry.get(m[0])?.id;if(t!==m[0]&&y){i(m);continue}}if(this.metadataRegistry.get(m[0])?.id){i(m);continue}if(p.cycle){i(m);continue}if(p.count>1&&n.reused==="ref"){i(m);continue}}const o=(m,p)=>{const k=this.seen.get(m),y=k.def??k.schema,c={...y};if(k.ref===null)return;const u=k.ref;if(k.ref=null,u){o(u,p);const f=this.seen.get(u).schema;f.$ref&&(p.target==="draft-7"||p.target==="draft-4"||p.target==="openapi-3.0")?(y.allOf=y.allOf??[],y.allOf.push(f)):(Object.assign(y,f),Object.assign(y,c))}k.isParent||this.override({zodSchema:m,jsonSchema:y,path:k.path??[]})};for(const m of[...this.seen.entries()].reverse())o(m[0],{target:this.target});const d={};if(this.target==="draft-2020-12"?d.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?d.$schema="http://json-schema.org/draft-07/schema#":this.target==="draft-4"?d.$schema="http://json-schema.org/draft-04/schema#":this.target==="openapi-3.0"||console.warn(`Invalid target: ${this.target}`),n.external?.uri){const m=n.external.registry.get(t)?.id;if(!m)throw new Error("Schema is missing an `id` property");d.$id=n.external.uri(m)}Object.assign(d,a.def);const l=n.external?.defs??{};for(const m of this.seen.entries()){const p=m[1];p.def&&p.defId&&(l[p.defId]=p.def)}n.external||Object.keys(l).length>0&&(this.target==="draft-2020-12"?d.$defs=l:d.definitions=l);try{return JSON.parse(JSON.stringify(d))}catch{throw new Error("Error converting schema to JSON.")}}}function tt(e,t){if(e instanceof Xe){const n=new Q(t),a={};for(const o of e._idmap.entries()){const[d,l]=o;n.process(l)}const s={},i={registry:e,uri:t?.uri,defs:a};for(const o of e._idmap.entries()){const[d,l]=o;s[d]=n.emit(l,{...t,external:i})}if(Object.keys(a).length>0){const o=n.target==="draft-2020-12"?"$defs":"definitions";s.__shared={[o]:a}}return{schemas:s}}const r=new Q(t);return r.process(e),r.emit(e,t)}function E(e,t){const r=t??{seen:new Set};if(r.seen.has(e))return!1;r.seen.add(e);const n=e._zod.def;if(n.type==="transform")return!0;if(n.type==="array")return E(n.element,r);if(n.type==="set")return E(n.valueType,r);if(n.type==="lazy")return E(n.getter(),r);if(n.type==="promise"||n.type==="optional"||n.type==="nonoptional"||n.type==="nullable"||n.type==="readonly"||n.type==="default"||n.type==="prefault")return E(n.innerType,r);if(n.type==="intersection")return E(n.left,r)||E(n.right,r);if(n.type==="record"||n.type==="map")return E(n.keyType,r)||E(n.valueType,r);if(n.type==="pipe")return E(n.in,r)||E(n.out,r);if(n.type==="object"){for(const a in n.shape)if(E(n.shape[a],r))return!0;return!1}if(n.type==="union"){for(const a of n.options)if(E(a,r))return!0;return!1}if(n.type==="tuple"){for(const a of n.items)if(E(a,r))return!0;return!!(n.rest&&E(n.rest,r))}return!1}var A;(function(e){e.assertEqual=a=>{};function t(a){}e.assertIs=t;function r(a){throw new Error}e.assertNever=r,e.arrayToEnum=a=>{const s={};for(const i of a)s[i]=i;return s},e.getValidEnumValues=a=>{const s=e.objectKeys(a).filter(o=>typeof a[a[o]]!="number"),i={};for(const o of s)i[o]=a[o];return e.objectValues(i)},e.objectValues=a=>e.objectKeys(a).map(function(s){return a[s]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const s=[];for(const i in a)Object.prototype.hasOwnProperty.call(a,i)&&s.push(i);return s},e.find=(a,s)=>{for(const i of a)if(s(i))return i},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function n(a,s=" | "){return a.map(i=>typeof i=="string"?`'${i}'`:i).join(s)}e.joinValues=n,e.jsonStringifyReplacer=(a,s)=>typeof s=="bigint"?s.toString():s})(A||(A={}));var X;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(X||(X={}));A.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]);A.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class D extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(s){return s.message},n={_errors:[]},a=s=>{for(const i of s.issues)if(i.code==="invalid_union")i.unionErrors.map(a);else if(i.code==="invalid_return_type")a(i.returnTypeError);else if(i.code==="invalid_arguments")a(i.argumentsError);else if(i.path.length===0)n._errors.push(r(i));else{let o=n,d=0;for(;d<i.path.length;){const l=i.path[d];d===i.path.length-1?(o[l]=o[l]||{_errors:[]},o[l]._errors.push(r(i))):o[l]=o[l]||{_errors:[]},o=o[l],d++}}};return a(this),n}static assert(t){if(!(t instanceof D))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,A.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r=Object.create(null),n=[];for(const a of this.issues)if(a.path.length>0){const s=a.path[0];r[s]=r[s]||[],r[s].push(t(a))}else n.push(t(a));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}D.create=e=>new D(e);var Y;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t?.message})(Y||(Y={}));var h;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(h||(h={}));var ne="vercel.ai.error",rt=Symbol.for(ne),ae,nt=class se extends Error{constructor({name:t,message:r,cause:n}){super(r),this[ae]=!0,this.name=t,this.cause=n}static isInstance(t){return se.hasMarker(t,ne)}static hasMarker(t,r){const n=Symbol.for(r);return t!=null&&typeof t=="object"&&n in t&&typeof t[n]=="boolean"&&t[n]===!0}};ae=rt;var w=nt,ie="AI_APICallError",oe=`vercel.ai.error.${ie}`,at=Symbol.for(oe),ce,$=class extends w{constructor({message:e,url:t,requestBodyValues:r,statusCode:n,responseHeaders:a,responseBody:s,cause:i,isRetryable:o=n!=null&&(n===408||n===409||n===429||n>=500),data:d}){super({name:ie,message:e,cause:i}),this[ce]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=a,this.responseBody=s,this.isRetryable=o,this.data=d}static isInstance(e){return w.hasMarker(e,oe)}};ce=at;var ue="AI_EmptyResponseBodyError",le=`vercel.ai.error.${ue}`,st=Symbol.for(le),fe,it=class extends w{constructor({message:e="Empty response body"}={}){super({name:ue,message:e}),this[fe]=!0}static isInstance(e){return w.hasMarker(e,le)}};fe=st;function de(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var pe="AI_InvalidArgumentError",me=`vercel.ai.error.${pe}`,ot=Symbol.for(me),he,ye=class extends w{constructor({message:e,cause:t,argument:r}){super({name:pe,message:e,cause:t}),this[he]=!0,this.argument=r}static isInstance(e){return w.hasMarker(e,me)}};he=ot;var ge="AI_InvalidPromptError",ve=`vercel.ai.error.${ge}`,ct=Symbol.for(ve),be,Dr=class extends w{constructor({prompt:e,message:t,cause:r}){super({name:ge,message:`Invalid prompt: ${t}`,cause:r}),this[be]=!0,this.prompt=e}static isInstance(e){return w.hasMarker(e,ve)}};be=ct;var we="AI_InvalidResponseDataError",_e=`vercel.ai.error.${we}`,ut=Symbol.for(_e),ke,Mr=class extends w{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:we,message:t}),this[ke]=!0,this.data=e}static isInstance(e){return w.hasMarker(e,_e)}};ke=ut;var Se="AI_JSONParseError",Ee=`vercel.ai.error.${Se}`,lt=Symbol.for(Ee),Oe,M=class extends w{constructor({text:e,cause:t}){super({name:Se,message:`JSON parsing failed: Text: ${e}.
Error message: ${de(t)}`,cause:t}),this[Oe]=!0,this.text=e}static isInstance(e){return w.hasMarker(e,Ee)}};Oe=lt;var xe="AI_LoadAPIKeyError",Ie=`vercel.ai.error.${xe}`,ft=Symbol.for(Ie),Pe,N=class extends w{constructor({message:e}){super({name:xe,message:e}),this[Pe]=!0}static isInstance(e){return w.hasMarker(e,Ie)}};Pe=ft;var $e="AI_LoadSettingError",Ae=`vercel.ai.error.${$e}`,dt=Symbol.for(Ae),Ze,T=class extends w{constructor({message:e}){super({name:$e,message:e}),this[Ze]=!0}static isInstance(e){return w.hasMarker(e,Ae)}};Ze=dt;var je="AI_NoSuchModelError",Ne=`vercel.ai.error.${je}`,pt=Symbol.for(Ne),Te,zr=class extends w{constructor({errorName:e=je,modelId:t,modelType:r,message:n=`No such ${r}: ${t}`}){super({name:e,message:n}),this[Te]=!0,this.modelId=t,this.modelType=r}static isInstance(e){return w.hasMarker(e,Ne)}};Te=pt;var De="AI_TooManyEmbeddingValuesForCallError",Me=`vercel.ai.error.${De}`,mt=Symbol.for(Me),ze,Rr=class extends w{constructor(e){super({name:De,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[ze]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return w.hasMarker(e,Me)}};ze=mt;var Re="AI_TypeValidationError",Le=`vercel.ai.error.${Re}`,ht=Symbol.for(Le),Je,yt=class U extends w{constructor({value:t,cause:r}){super({name:Re,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${de(r)}`,cause:r}),this[Je]=!0,this.value=t}static isInstance(t){return w.hasMarker(t,Le)}static wrap({value:t,cause:r}){return U.isInstance(r)&&r.value===t?r:new U({value:t,cause:r})}};Je=ht;var Z=yt,Ce="AI_UnsupportedFunctionalityError",Ue=`vercel.ai.error.${Ce}`,gt=Symbol.for(Ue),Be,Lr=class extends w{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:Ce,message:t}),this[Be]=!0,this.functionality=e}static isInstance(e){return w.hasMarker(e,Ue)}};Be=gt;class K extends Error{constructor(t,r){super(t),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}}function L(e){}function vt(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=L,onError:r=L,onRetry:n=L,onComment:a}=e;let s="",i=!0,o,d="",l="";function m(u){const f=i?u.replace(/^\xEF\xBB\xBF/,""):u,[v,g]=bt(`${s}${f}`);for(const _ of v)p(_);s=g,i=!1}function p(u){if(u===""){y();return}if(u.startsWith(":")){a&&a(u.slice(u.startsWith(": ")?2:1));return}const f=u.indexOf(":");if(f!==-1){const v=u.slice(0,f),g=u[f+1]===" "?2:1,_=u.slice(f+g);k(v,_,u);return}k(u,"",u)}function k(u,f,v){switch(u){case"event":l=f;break;case"data":d=`${d}${f}
`;break;case"id":o=f.includes("\0")?void 0:f;break;case"retry":/^\d+$/.test(f)?n(parseInt(f,10)):r(new K(`Invalid \`retry\` value: "${f}"`,{type:"invalid-retry",value:f,line:v}));break;default:r(new K(`Unknown field "${u.length>20?`${u.slice(0,20)}â€¦`:u}"`,{type:"unknown-field",field:u,value:f,line:v}));break}}function y(){d.length>0&&t({id:o,event:l||void 0,data:d.endsWith(`
`)?d.slice(0,-1):d}),o=void 0,d="",l=""}function c(u={}){s&&u.consume&&p(s),i=!0,o=void 0,d="",l="",s=""}return{feed:m,reset:c}}function bt(e){const t=[];let r="",n=0;for(;n<e.length;){const a=e.indexOf("\r",n),s=e.indexOf(`
`,n);let i=-1;if(a!==-1&&s!==-1?i=Math.min(a,s):a!==-1?a===e.length-1?i=-1:i=a:s!==-1&&(i=s),i===-1){r=e.slice(n);break}else{const o=e.slice(n,i);t.push(o),n=i+1,e[n-1]==="\r"&&e[n]===`
`&&n++}}return[t,r]}class wt extends TransformStream{constructor({onError:t,onRetry:r,onComment:n}={}){let a;super({start(s){a=vt({onEvent:i=>{s.enqueue(i)},onError(i){t==="terminate"?s.error(i):typeof t=="function"&&t(i)},onRetry:r,onComment:n})},transform(s){a.feed(s)}})}}var H={};function Jr(...e){return e.reduce((t,r)=>({...t,...r??{}}),{})}function j(e){return Object.fromEntries([...e.headers])}var _t=({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{const a=()=>{const s=r.length,i=new Array(t);for(let o=0;o<t;o++)i[o]=r[Math.random()*s|0];return i.join("")};if(e==null)return a;if(r.includes(n))throw new ye({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return()=>`${e}${n}${a()}`},Cr=_t();function B(e){return(e instanceof Error||e instanceof DOMException)&&(e.name==="AbortError"||e.name==="ResponseAborted"||e.name==="TimeoutError")}var kt=["fetch failed","failed to fetch"];function St({error:e,url:t,requestBodyValues:r}){if(B(e))return e;if(e instanceof TypeError&&kt.includes(e.message.toLowerCase())){const n=e.cause;if(n!=null)return new $({message:`Cannot connect to API: ${n.message}`,cause:n,url:t,requestBodyValues:r,isRetryable:!0})}return e}function Et(e=globalThis){var t,r,n;return e.window?"runtime/browser":(t=e.navigator)!=null&&t.userAgent?`runtime/${e.navigator.userAgent.toLowerCase()}`:(n=(r=e.process)==null?void 0:r.versions)!=null&&n.node?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function Ot(e){if(e==null)return{};const t={};if(e instanceof Headers)e.forEach((r,n)=>{t[n.toLowerCase()]=r});else{Array.isArray(e)||(e=Object.entries(e));for(const[r,n]of e)n!=null&&(t[r.toLowerCase()]=n)}return t}function xt(e,...t){const r=new Headers(Ot(e)),n=r.get("user-agent")||"";return r.set("user-agent",[n,...t].filter(Boolean).join(" ")),Object.fromEntries(r.entries())}var It="3.0.18";function Ur({apiKey:e,environmentVariableName:t,apiKeyParameterName:r="apiKey",description:n}){if(typeof e=="string")return e;if(e!=null)throw new N({message:`${n} API key must be a string.`});if(typeof process>"u")throw new N({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(e=H[t],e==null)throw new N({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new N({message:`${n} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}function Br({settingValue:e,environmentVariableName:t}){if(typeof e=="string")return e;if(!(e!=null||typeof process>"u")&&(e=H[t],!(e==null||typeof e!="string")))return e}function Vr({settingValue:e,environmentVariableName:t,settingName:r,description:n}){if(typeof e=="string")return e;if(e!=null)throw new T({message:`${n} setting must be a string.`});if(typeof process>"u")throw new T({message:`${n} setting is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(e=H[t],e==null)throw new T({message:`${n} setting is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new T({message:`${n} setting must be a string. The value of the ${t} environment variable is not a string.`});return e}function Fr(e){var t;const[r,n=""]=e.toLowerCase().split("/");return(t={mpeg:"mp3","x-wav":"wav",opus:"ogg",mp4:"m4a","x-m4a":"m4a"}[n])!=null?t:n}var Pt=/"__proto__"\s*:/,$t=/"constructor"\s*:/;function ee(e){const t=JSON.parse(e);return t===null||typeof t!="object"||Pt.test(e)===!1&&$t.test(e)===!1?t:At(t)}function At(e){let t=[e];for(;t.length;){const r=t;t=[];for(const n of r){if(Object.prototype.hasOwnProperty.call(n,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(n,"constructor")&&Object.prototype.hasOwnProperty.call(n.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(const a in n){const s=n[a];s&&typeof s=="object"&&t.push(s)}}}return e}function q(e){const{stackTraceLimit:t}=Error;try{Error.stackTraceLimit=0}catch{return ee(e)}try{return ee(e)}finally{Error.stackTraceLimit=t}}var z=Symbol.for("vercel.ai.validator");function Zt(e){return{[z]:!0,validate:e}}function jt(e){return typeof e=="object"&&e!==null&&z in e&&e[z]===!0&&"validate"in e}function Hr(e){let t;return()=>(t==null&&(t=e()),t)}function Nt(e){return jt(e)?e:typeof e=="function"?e():Tt(e)}function Tt(e){return Zt(async t=>{const r=await e["~standard"].validate(t);return r.issues==null?{success:!0,value:r.value}:{success:!1,error:new Z({value:t,cause:r.issues})}})}async function Dt({value:e,schema:t}){const r=await G({value:e,schema:t});if(!r.success)throw Z.wrap({value:e,cause:r.error});return r.value}async function G({value:e,schema:t}){const r=Nt(t);try{if(r.validate==null)return{success:!0,value:e,rawValue:e};const n=await r.validate(e);return n.success?{success:!0,value:n.value,rawValue:e}:{success:!1,error:Z.wrap({value:e,cause:n.error}),rawValue:e}}catch(n){return{success:!1,error:Z.wrap({value:e,cause:n}),rawValue:e}}}async function Mt({text:e,schema:t}){try{const r=q(e);return t==null?r:Dt({value:r,schema:t})}catch(r){throw M.isInstance(r)||Z.isInstance(r)?r:new M({text:e,cause:r})}}async function Ve({text:e,schema:t}){try{const r=q(e);return t==null?{success:!0,value:r,rawValue:r}:await G({value:r,schema:t})}catch(r){return{success:!1,error:M.isInstance(r)?r:new M({text:e,cause:r}),rawValue:void 0}}}function qr(e){try{return q(e),!0}catch{return!1}}function zt({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new wt).pipeThrough(new TransformStream({async transform({data:r},n){r!=="[DONE]"&&n.enqueue(await Ve({text:r,schema:t}))}}))}async function Gr({provider:e,providerOptions:t,schema:r}){if(t?.[e]==null)return;const n=await G({value:t[e],schema:r});if(!n.success)throw new ye({argument:"providerOptions",message:`invalid ${e} provider options`,cause:n.error});return n.value}var Rt=()=>globalThis.fetch,Wr=async({url:e,headers:t,body:r,failedResponseHandler:n,successfulResponseHandler:a,abortSignal:s,fetch:i})=>Fe({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:a,abortSignal:s,fetch:i}),Qr=async({url:e,headers:t,formData:r,failedResponseHandler:n,successfulResponseHandler:a,abortSignal:s,fetch:i})=>Fe({url:e,headers:t,body:{content:r,values:Object.fromEntries(r.entries())},failedResponseHandler:n,successfulResponseHandler:a,abortSignal:s,fetch:i}),Fe=async({url:e,headers:t={},body:r,successfulResponseHandler:n,failedResponseHandler:a,abortSignal:s,fetch:i=Rt()})=>{try{const o=await i(e,{method:"POST",headers:xt(t,`ai-sdk/provider-utils/${It}`,Et()),body:r.content,signal:s}),d=j(o);if(!o.ok){let l;try{l=await a({response:o,url:e,requestBodyValues:r.values})}catch(m){throw B(m)||$.isInstance(m)?m:new $({message:"Failed to process error response",cause:m,statusCode:o.status,url:e,responseHeaders:d,requestBodyValues:r.values})}throw l.value}try{return await n({response:o,url:e,requestBodyValues:r.values})}catch(l){throw l instanceof Error&&(B(l)||$.isInstance(l))?l:new $({message:"Failed to process successful response",cause:l,statusCode:o.status,url:e,responseHeaders:d,requestBodyValues:r.values})}}catch(o){throw St({error:o,url:e,requestBodyValues:r.values})}};function Xr({id:e,name:t,inputSchema:r}){return({execute:n,outputSchema:a,toModelOutput:s,onInputStart:i,onInputDelta:o,onInputAvailable:d,...l})=>({type:"provider-defined",id:e,name:t,args:l,inputSchema:r,outputSchema:a,execute:n,toModelOutput:s,onInputStart:i,onInputDelta:o,onInputAvailable:d})}function Yr({id:e,name:t,inputSchema:r,outputSchema:n}){return({execute:a,toModelOutput:s,onInputStart:i,onInputDelta:o,onInputAvailable:d,...l})=>({type:"provider-defined",id:e,name:t,args:l,inputSchema:r,outputSchema:n,execute:a,toModelOutput:s,onInputStart:i,onInputDelta:o,onInputAvailable:d})}async function Kr(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var en=({errorSchema:e,errorToMessage:t,isRetryable:r})=>async({response:n,url:a,requestBodyValues:s})=>{const i=await n.text(),o=j(n);if(i.trim()==="")return{responseHeaders:o,value:new $({message:n.statusText,url:a,requestBodyValues:s,statusCode:n.status,responseHeaders:o,responseBody:i,isRetryable:r?.(n)})};try{const d=await Mt({text:i,schema:e});return{responseHeaders:o,value:new $({message:t(d),url:a,requestBodyValues:s,statusCode:n.status,responseHeaders:o,responseBody:i,data:d,isRetryable:r?.(n,d)})}}catch{return{responseHeaders:o,value:new $({message:n.statusText,url:a,requestBodyValues:s,statusCode:n.status,responseHeaders:o,responseBody:i,isRetryable:r?.(n)})}}},tn=e=>async({response:t})=>{const r=j(t);if(t.body==null)throw new it({});return{responseHeaders:r,value:zt({stream:t.body,schema:e})}},rn=e=>async({response:t,url:r,requestBodyValues:n})=>{const a=await t.text(),s=await Ve({text:a,schema:e}),i=j(t);if(!s.success)throw new $({message:"Invalid JSON response",cause:s.error,statusCode:t.status,responseHeaders:i,responseBody:a,url:r,requestBodyValues:n});return{responseHeaders:i,value:s.value,rawValue:s.rawValue}},nn=()=>async({response:e,url:t,requestBodyValues:r})=>{const n=j(e);if(!e.body)throw new $({message:"Response body is empty",url:t,requestBodyValues:r,statusCode:e.status,responseHeaders:n,responseBody:void 0});try{const a=await e.arrayBuffer();return{responseHeaders:n,value:new Uint8Array(a)}}catch(a){throw new $({message:"Failed to read response as array buffer",url:t,requestBodyValues:r,statusCode:e.status,responseHeaders:n,responseBody:void 0,cause:a})}},Lt=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")},Jt=Symbol("Let zodToJsonSchema decide on which parser to use"),te={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Ct=e=>typeof e=="string"?{...te,name:e}:{...te,...e};function x(){return{}}function Ut(e,t){var r,n,a;const s={type:"array"};return(r=e.type)!=null&&r._def&&((a=(n=e.type)==null?void 0:n._def)==null?void 0:a.typeName)!==h.ZodAny&&(s.items=b(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(s.minItems=e.minLength.value),e.maxLength&&(s.maxItems=e.maxLength.value),e.exactLength&&(s.minItems=e.exactLength.value,s.maxItems=e.exactLength.value),s}function Bt(e){const t={type:"integer",format:"int64"};if(!e.checks)return t;for(const r of e.checks)switch(r.kind){case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function Vt(){return{type:"boolean"}}function He(e,t){return b(e.type._def,t)}var Ft=(e,t)=>b(e.innerType._def,t);function qe(e,t,r){const n=r??t.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((a,s)=>qe(e,t,a))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Ht(e)}}var Ht=e=>{const t={type:"integer",format:"unix-time"};for(const r of e.checks)switch(r.kind){case"min":t.minimum=r.value;break;case"max":t.maximum=r.value;break}return t};function qt(e,t){return{...b(e.innerType._def,t),default:e.defaultValue()}}function Gt(e,t){return t.effectStrategy==="input"?b(e.schema._def,t):x()}function Wt(e){return{type:"string",enum:Array.from(e.values)}}var Qt=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function Xt(e,t){const r=[b(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),b(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(a=>!!a),n=[];return r.forEach(a=>{if(Qt(a))n.push(...a.allOf);else{let s=a;if("additionalProperties"in a&&a.additionalProperties===!1){const{additionalProperties:i,...o}=a;s=o}n.push(s)}}),n.length?{allOf:n}:void 0}function Yt(e){const t=typeof e.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(e.value)?"array":"object"}:{type:t==="bigint"?"integer":t,const:e.value}}var J=void 0,I={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(J===void 0&&(J=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),J),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Ge(e,t){const r={type:"string"};if(e.checks)for(const n of e.checks)switch(n.kind){case"min":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value;break;case"max":r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"email":switch(t.emailStrategy){case"format:email":P(r,"email",n.message,t);break;case"format:idn-email":P(r,"idn-email",n.message,t);break;case"pattern:zod":S(r,I.email,n.message,t);break}break;case"url":P(r,"uri",n.message,t);break;case"uuid":P(r,"uuid",n.message,t);break;case"regex":S(r,n.regex,n.message,t);break;case"cuid":S(r,I.cuid,n.message,t);break;case"cuid2":S(r,I.cuid2,n.message,t);break;case"startsWith":S(r,RegExp(`^${C(n.value,t)}`),n.message,t);break;case"endsWith":S(r,RegExp(`${C(n.value,t)}$`),n.message,t);break;case"datetime":P(r,"date-time",n.message,t);break;case"date":P(r,"date",n.message,t);break;case"time":P(r,"time",n.message,t);break;case"duration":P(r,"duration",n.message,t);break;case"length":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"includes":{S(r,RegExp(C(n.value,t)),n.message,t);break}case"ip":{n.version!=="v6"&&P(r,"ipv4",n.message,t),n.version!=="v4"&&P(r,"ipv6",n.message,t);break}case"base64url":S(r,I.base64url,n.message,t);break;case"jwt":S(r,I.jwt,n.message,t);break;case"cidr":{n.version!=="v6"&&S(r,I.ipv4Cidr,n.message,t),n.version!=="v4"&&S(r,I.ipv6Cidr,n.message,t);break}case"emoji":S(r,I.emoji(),n.message,t);break;case"ulid":{S(r,I.ulid,n.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{P(r,"binary",n.message,t);break}case"contentEncoding:base64":{r.contentEncoding="base64";break}case"pattern:zod":{S(r,I.base64,n.message,t);break}}break}case"nanoid":S(r,I.nanoid,n.message,t)}return r}function C(e,t){return t.patternStrategy==="escape"?er(e):e}var Kt=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function er(e){let t="";for(let r=0;r<e.length;r++)Kt.has(e[r])||(t+="\\"),t+=e[r];return t}function P(e,t,r,n){var a;e.format||(a=e.anyOf)!=null&&a.some(s=>s.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...r&&n.errorMessages&&{errorMessage:{format:r}}})):e.format=t}function S(e,t,r,n){var a;e.pattern||(a=e.allOf)!=null&&a.some(s=>s.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:re(t,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):e.pattern=re(t,n)}function re(e,t){var r;if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},a=n.i?e.source.toLowerCase():e.source;let s="",i=!1,o=!1,d=!1;for(let l=0;l<a.length;l++){if(i){s+=a[l],i=!1;continue}if(n.i){if(o){if(a[l].match(/[a-z]/)){d?(s+=a[l],s+=`${a[l-2]}-${a[l]}`.toUpperCase(),d=!1):a[l+1]==="-"&&((r=a[l+2])!=null&&r.match(/[a-z]/))?(s+=a[l],d=!0):s+=`${a[l]}${a[l].toUpperCase()}`;continue}}else if(a[l].match(/[a-z]/)){s+=`[${a[l]}${a[l].toUpperCase()}]`;continue}}if(n.m){if(a[l]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(a[l]==="$"){s+=`($|(?=[\r
]))`;continue}}if(n.s&&a[l]==="."){s+=o?`${a[l]}\r
`:`[${a[l]}\r
]`;continue}s+=a[l],a[l]==="\\"?i=!0:o&&a[l]==="]"?o=!1:!o&&a[l]==="["&&(o=!0)}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return s}function We(e,t){var r,n,a,s,i,o;const d={type:"object",additionalProperties:(r=b(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))!=null?r:t.allowedAdditionalProperties};if(((n=e.keyType)==null?void 0:n._def.typeName)===h.ZodString&&((a=e.keyType._def.checks)!=null&&a.length)){const{type:l,...m}=Ge(e.keyType._def,t);return{...d,propertyNames:m}}else{if(((s=e.keyType)==null?void 0:s._def.typeName)===h.ZodEnum)return{...d,propertyNames:{enum:e.keyType._def.values}};if(((i=e.keyType)==null?void 0:i._def.typeName)===h.ZodBranded&&e.keyType._def.type._def.typeName===h.ZodString&&((o=e.keyType._def.type._def.checks)!=null&&o.length)){const{type:l,...m}=He(e.keyType._def,t);return{...d,propertyNames:m}}}return d}function tr(e,t){if(t.mapStrategy==="record")return We(e,t);const r=b(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||x(),n=b(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||x();return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}function rr(e){const t=e.values,n=Object.keys(e.values).filter(s=>typeof t[t[s]]!="number").map(s=>t[s]),a=Array.from(new Set(n.map(s=>typeof s)));return{type:a.length===1?a[0]==="string"?"string":"number":["string","number"],enum:n}}function nr(){return{not:x()}}function ar(){return{type:"null"}}var V={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function sr(e,t){const r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(n=>n._def.typeName in V&&(!n._def.checks||!n._def.checks.length))){const n=r.reduce((a,s)=>{const i=V[s._def.typeName];return i&&!a.includes(i)?[...a,i]:a},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){const n=r.reduce((a,s)=>{const i=typeof s._def.value;switch(i){case"string":case"number":case"boolean":return[...a,i];case"bigint":return[...a,"integer"];case"object":if(s._def.value===null)return[...a,"null"];case"symbol":case"undefined":case"function":default:return a}},[]);if(n.length===r.length){const a=n.filter((s,i,o)=>o.indexOf(s)===i);return{type:a.length>1?a:a[0],enum:r.reduce((s,i)=>s.includes(i._def.value)?s:[...s,i._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,a)=>[...n,...a._def.values.filter(s=>!n.includes(s))],[])};return ir(e,t)}var ir=(e,t)=>{const r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((n,a)=>b(n._def,{...t,currentPath:[...t.currentPath,"anyOf",`${a}`]})).filter(n=>!!n&&(!t.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0};function or(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[V[e.innerType._def.typeName],"null"]};const r=b(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function cr(e){const t={type:"number"};if(!e.checks)return t;for(const r of e.checks)switch(r.kind){case"int":t.type="integer";break;case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function ur(e,t){const r={type:"object",properties:{}},n=[],a=e.shape();for(const i in a){let o=a[i];if(o===void 0||o._def===void 0)continue;const d=fr(o),l=b(o._def,{...t,currentPath:[...t.currentPath,"properties",i],propertyPath:[...t.currentPath,"properties",i]});l!==void 0&&(r.properties[i]=l,d||n.push(i))}n.length&&(r.required=n);const s=lr(e,t);return s!==void 0&&(r.additionalProperties=s),r}function lr(e,t){if(e.catchall._def.typeName!=="ZodNever")return b(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function fr(e){try{return e.isOptional()}catch{return!0}}var dr=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return b(e.innerType._def,t);const n=b(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:x()},n]}:x()},pr=(e,t)=>{if(t.pipeStrategy==="input")return b(e.in._def,t);if(t.pipeStrategy==="output")return b(e.out._def,t);const r=b(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),n=b(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(a=>a!==void 0)}};function mr(e,t){return b(e.type._def,t)}function hr(e,t){const n={type:"array",uniqueItems:!0,items:b(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(n.minItems=e.minSize.value),e.maxSize&&(n.maxItems=e.maxSize.value),n}function yr(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((r,n)=>b(r._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:b(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((r,n)=>b(r._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}function gr(){return{not:x()}}function vr(){return x()}var br=(e,t)=>b(e.innerType._def,t),wr=(e,t,r)=>{switch(t){case h.ZodString:return Ge(e,r);case h.ZodNumber:return cr(e);case h.ZodObject:return ur(e,r);case h.ZodBigInt:return Bt(e);case h.ZodBoolean:return Vt();case h.ZodDate:return qe(e,r);case h.ZodUndefined:return gr();case h.ZodNull:return ar();case h.ZodArray:return Ut(e,r);case h.ZodUnion:case h.ZodDiscriminatedUnion:return sr(e,r);case h.ZodIntersection:return Xt(e,r);case h.ZodTuple:return yr(e,r);case h.ZodRecord:return We(e,r);case h.ZodLiteral:return Yt(e);case h.ZodEnum:return Wt(e);case h.ZodNativeEnum:return rr(e);case h.ZodNullable:return or(e,r);case h.ZodOptional:return dr(e,r);case h.ZodMap:return tr(e,r);case h.ZodSet:return hr(e,r);case h.ZodLazy:return()=>e.getter()._def;case h.ZodPromise:return mr(e,r);case h.ZodNaN:case h.ZodNever:return nr();case h.ZodEffects:return Gt(e,r);case h.ZodAny:return x();case h.ZodUnknown:return vr();case h.ZodDefault:return qt(e,r);case h.ZodBranded:return He(e,r);case h.ZodReadonly:return br(e,r);case h.ZodCatch:return Ft(e,r);case h.ZodPipeline:return pr(e,r);case h.ZodFunction:case h.ZodVoid:case h.ZodSymbol:return;default:return(n=>{})()}};function b(e,t,r=!1){var n;const a=t.seen.get(e);if(t.override){const d=(n=t.override)==null?void 0:n.call(t,e,t,a,r);if(d!==Jt)return d}if(a&&!r){const d=_r(a,t);if(d!==void 0)return d}const s={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,s);const i=wr(e,e.typeName,t),o=typeof i=="function"?b(i(),t):i;if(o&&kr(e,t,o),t.postProcess){const d=t.postProcess(o,e,t);return s.jsonSchema=o,d}return s.jsonSchema=o,o}var _r=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:Lt(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((r,n)=>t.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),x()):t.$refStrategy==="seen"?x():void 0}},kr=(e,t,r)=>(e.description&&(r.description=e.description),r),Sr=e=>{const t=Ct(e),r=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([n,a])=>[a._def,{def:a._def,path:[...t.basePath,t.definitionPath,n],jsonSchema:void 0}]))}},Er=(e,t)=>{var r;const n=Sr(t);let a=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((l,[m,p])=>{var k;return{...l,[m]:(k=b(p._def,{...n,currentPath:[...n.basePath,n.definitionPath,m]},!0))!=null?k:x()}},{}):void 0;const s=typeof t=="string"?t:t?.nameStrategy==="title"?void 0:t?.name,i=(r=b(e._def,s===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,s]},!1))!=null?r:x(),o=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;o!==void 0&&(i.title=o);const d=s===void 0?a?{...i,[n.definitionPath]:a}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,s].join("/"),[n.definitionPath]:{...a,[s]:i}};return d.$schema="http://json-schema.org/draft-07/schema#",d},Or=Er;function xr(e,t){var r;const n=(r=void 0)!=null?r:!1;return W(()=>Or(e,{$refStrategy:n?"root":"none"}),{validate:async a=>{const s=await e.safeParseAsync(a);return s.success?{success:!0,value:s.data}:{success:!1,error:s.error}}})}function Ir(e,t){var r;const n=(r=void 0)!=null?r:!1;return W(()=>tt(e,{target:"draft-7",io:"output",reused:n?"ref":"inline"}),{validate:async a=>{const s=await et(e,a);return s.success?{success:!0,value:s.data}:{success:!1,error:s.error}}})}function Pr(e){return"_zod"in e}function $r(e,t){return Pr(e)?Ir(e):xr(e)}var F=Symbol.for("vercel.ai.schema");function an(e){let t;return()=>(t==null&&(t=e()),t)}function W(e,{validate:t}={}){return{[F]:!0,_type:void 0,[z]:!0,get jsonSchema(){return typeof e=="function"&&(e=e()),e},validate:t}}function Ar(e){return typeof e=="object"&&e!==null&&F in e&&e[F]===!0&&"jsonSchema"in e&&"validate"in e}function sn(e){return e==null?W({properties:{},additionalProperties:!1}):Ar(e)?e:typeof e=="function"?e():$r(e)}var{btoa:Zr,atob:jr}=globalThis;function on(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),r=jr(t);return Uint8Array.from(r,n=>n.codePointAt(0))}function Nr(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return Zr(t)}function cn(e){return e instanceof Uint8Array?Nr(e):e}function un(e){return e?.replace(/\/$/,"")}export{$ as A,Ot as B,Et as C,sn as D,wt as E,j as F,it as G,Ve as H,Mr as I,G as J,zr as N,Rr as T,Lr as U,xt as a,Wr as b,Yr as c,Jr as d,on as e,Qr as f,Cr as g,Ur as h,qr as i,rn as j,tn as k,Br as l,Fr as m,cn as n,Dr as o,Gr as p,en as q,nn as r,an as s,Hr as t,Xr as u,Dt as v,un as w,Kr as x,Vr as y,$r as z};
//# sourceMappingURL=index-DCLtZRWp.js.map
