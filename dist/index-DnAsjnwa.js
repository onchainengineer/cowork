import{E as je,t as De,Z as c}from"./stream-EztMLV5l.js";import{aH as Ne}from"./main-D0Ooo9fF.js";var R="vercel.ai.error",Fe=Symbol.for(R),C,Me=class z extends Error{constructor({name:t,message:r,cause:a}){super(r),this[C]=!0,this.name=t,this.cause=a}static isInstance(t){return z.hasMarker(t,R)}static hasMarker(t,r){const a=Symbol.for(r);return t!=null&&typeof t=="object"&&a in t&&typeof t[a]=="boolean"&&t[a]===!0}};C=Fe;var m=Me,B="AI_APICallError",U=`vercel.ai.error.${B}`,Le=Symbol.for(U),J,g=class extends m{constructor({message:e,url:t,requestBodyValues:r,statusCode:a,responseHeaders:n,responseBody:s,cause:i,isRetryable:o=a!=null&&(a===408||a===409||a===429||a>=500),data:l}){super({name:B,message:e,cause:i}),this[J]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=n,this.responseBody=s,this.isRetryable=o,this.data=l}static isInstance(e){return m.hasMarker(e,U)}};J=Le;var H="AI_EmptyResponseBodyError",V=`vercel.ai.error.${H}`,Re=Symbol.for(V),q,Ce=class extends m{constructor({message:e="Empty response body"}={}){super({name:H,message:e}),this[q]=!0}static isInstance(e){return m.hasMarker(e,V)}};q=Re;function G(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var K="AI_InvalidArgumentError",W=`vercel.ai.error.${K}`,ze=Symbol.for(W),Q,X=class extends m{constructor({message:e,cause:t,argument:r}){super({name:K,message:e,cause:t}),this[Q]=!0,this.argument=r}static isInstance(e){return m.hasMarker(e,W)}};Q=ze;var Y="AI_InvalidPromptError",ee=`vercel.ai.error.${Y}`,Be=Symbol.for(ee),te,fr=class extends m{constructor({prompt:e,message:t,cause:r}){super({name:Y,message:`Invalid prompt: ${t}`,cause:r}),this[te]=!0,this.prompt=e}static isInstance(e){return m.hasMarker(e,ee)}};te=Be;var re="AI_InvalidResponseDataError",ae=`vercel.ai.error.${re}`,Ue=Symbol.for(ae),ne,pr=class extends m{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:re,message:t}),this[ne]=!0,this.data=e}static isInstance(e){return m.hasMarker(e,ae)}};ne=Ue;var se="AI_JSONParseError",ie=`vercel.ai.error.${se}`,Je=Symbol.for(ie),oe,k=class extends m{constructor({text:e,cause:t}){super({name:se,message:`JSON parsing failed: Text: ${e}.
Error message: ${G(t)}`,cause:t}),this[oe]=!0,this.text=e}static isInstance(e){return m.hasMarker(e,ie)}};oe=Je;var ue="AI_LoadAPIKeyError",ce=`vercel.ai.error.${ue}`,He=Symbol.for(ce),le,w=class extends m{constructor({message:e}){super({name:ue,message:e}),this[le]=!0}static isInstance(e){return m.hasMarker(e,ce)}};le=He;var de="AI_LoadSettingError",me=`vercel.ai.error.${de}`,Ve=Symbol.for(me),fe,P=class extends m{constructor({message:e}){super({name:de,message:e}),this[fe]=!0}static isInstance(e){return m.hasMarker(e,me)}};fe=Ve;var pe="AI_NoSuchModelError",ve=`vercel.ai.error.${pe}`,qe=Symbol.for(ve),ye,vr=class extends m{constructor({errorName:e=pe,modelId:t,modelType:r,message:a=`No such ${r}: ${t}`}){super({name:e,message:a}),this[ye]=!0,this.modelId=t,this.modelType=r}static isInstance(e){return m.hasMarker(e,ve)}};ye=qe;var he="AI_TooManyEmbeddingValuesForCallError",ge=`vercel.ai.error.${he}`,Ge=Symbol.for(ge),be,yr=class extends m{constructor(e){super({name:he,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[be]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return m.hasMarker(e,ge)}};be=Ge;var _e="AI_TypeValidationError",we=`vercel.ai.error.${_e}`,Ke=Symbol.for(we),Pe,We=class $ extends m{constructor({value:t,cause:r}){super({name:_e,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${G(r)}`,cause:r}),this[Pe]=!0,this.value=t}static isInstance(t){return m.hasMarker(t,we)}static wrap({value:t,cause:r}){return $.isInstance(r)&&r.value===t?r:new $({value:t,cause:r})}};Pe=Ke;var b=We,ke="AI_UnsupportedFunctionalityError",Se=`vercel.ai.error.${ke}`,Qe=Symbol.for(Se),Ae,hr=class extends m{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:ke,message:t}),this[Ae]=!0,this.functionality=e}static isInstance(e){return m.hasMarker(e,Se)}};Ae=Qe;var Z={};function gr(...e){return e.reduce((t,r)=>({...t,...r??{}}),{})}function _(e){return Object.fromEntries([...e.headers])}var Xe=({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:a="-"}={})=>{const n=()=>{const s=r.length,i=new Array(t);for(let o=0;o<t;o++)i[o]=r[Math.random()*s|0];return i.join("")};if(e==null)return n;if(r.includes(a))throw new X({argument:"separator",message:`The separator "${a}" must not be part of the alphabet "${r}".`});return()=>`${e}${a}${n()}`},br=Xe();function I(e){return(e instanceof Error||e instanceof DOMException)&&(e.name==="AbortError"||e.name==="ResponseAborted"||e.name==="TimeoutError")}var Ye=["fetch failed","failed to fetch"];function et({error:e,url:t,requestBodyValues:r}){if(I(e))return e;if(e instanceof TypeError&&Ye.includes(e.message.toLowerCase())){const a=e.cause;if(a!=null)return new g({message:`Cannot connect to API: ${a.message}`,cause:a,url:t,requestBodyValues:r,isRetryable:!0})}return e}function tt(e=globalThis){var t,r,a;return e.window?"runtime/browser":(t=e.navigator)!=null&&t.userAgent?`runtime/${e.navigator.userAgent.toLowerCase()}`:(a=(r=e.process)==null?void 0:r.versions)!=null&&a.node?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function rt(e){if(e==null)return{};const t={};if(e instanceof Headers)e.forEach((r,a)=>{t[a.toLowerCase()]=r});else{Array.isArray(e)||(e=Object.entries(e));for(const[r,a]of e)a!=null&&(t[r.toLowerCase()]=a)}return t}function at(e,...t){const r=new Headers(rt(e)),a=r.get("user-agent")||"";return r.set("user-agent",[a,...t].filter(Boolean).join(" ")),Object.fromEntries(r.entries())}var nt="3.0.18";function _r({apiKey:e,environmentVariableName:t,apiKeyParameterName:r="apiKey",description:a}){if(typeof e=="string")return e;if(e!=null)throw new w({message:`${a} API key must be a string.`});if(typeof process>"u")throw new w({message:`${a} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(e=Z[t],e==null)throw new w({message:`${a} API key is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new w({message:`${a} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}function wr({settingValue:e,environmentVariableName:t}){if(typeof e=="string")return e;if(!(e!=null||typeof process>"u")&&(e=Z[t],!(e==null||typeof e!="string")))return e}function Pr({settingValue:e,environmentVariableName:t,settingName:r,description:a}){if(typeof e=="string")return e;if(e!=null)throw new P({message:`${a} setting must be a string.`});if(typeof process>"u")throw new P({message:`${a} setting is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(e=Z[t],e==null)throw new P({message:`${a} setting is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new P({message:`${a} setting must be a string. The value of the ${t} environment variable is not a string.`});return e}function kr(e){var t;const[r,a=""]=e.toLowerCase().split("/");return(t={mpeg:"mp3","x-wav":"wav",opus:"ogg",mp4:"m4a","x-m4a":"m4a"}[a])!=null?t:a}var st=/"__proto__"\s*:/,it=/"constructor"\s*:/;function F(e){const t=JSON.parse(e);return t===null||typeof t!="object"||st.test(e)===!1&&it.test(e)===!1?t:ot(t)}function ot(e){let t=[e];for(;t.length;){const r=t;t=[];for(const a of r){if(Object.prototype.hasOwnProperty.call(a,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(a,"constructor")&&Object.prototype.hasOwnProperty.call(a.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(const n in a){const s=a[n];s&&typeof s=="object"&&t.push(s)}}}return e}function x(e){const{stackTraceLimit:t}=Error;try{Error.stackTraceLimit=0}catch{return F(e)}try{return F(e)}finally{Error.stackTraceLimit=t}}var S=Symbol.for("vercel.ai.validator");function ut(e){return{[S]:!0,validate:e}}function ct(e){return typeof e=="object"&&e!==null&&S in e&&e[S]===!0&&"validate"in e}function Sr(e){let t;return()=>(t==null&&(t=e()),t)}function lt(e){return ct(e)?e:typeof e=="function"?e():dt(e)}function dt(e){return ut(async t=>{const r=await e["~standard"].validate(t);return r.issues==null?{success:!0,value:r.value}:{success:!1,error:new b({value:t,cause:r.issues})}})}async function mt({value:e,schema:t}){const r=await j({value:e,schema:t});if(!r.success)throw b.wrap({value:e,cause:r.error});return r.value}async function j({value:e,schema:t}){const r=lt(t);try{if(r.validate==null)return{success:!0,value:e,rawValue:e};const a=await r.validate(e);return a.success?{success:!0,value:a.value,rawValue:e}:{success:!1,error:b.wrap({value:e,cause:a.error}),rawValue:e}}catch(a){return{success:!1,error:b.wrap({value:e,cause:a}),rawValue:e}}}async function ft({text:e,schema:t}){try{const r=x(e);return t==null?r:mt({value:r,schema:t})}catch(r){throw k.isInstance(r)||b.isInstance(r)?r:new k({text:e,cause:r})}}async function Ee({text:e,schema:t}){try{const r=x(e);return t==null?{success:!0,value:r,rawValue:r}:await j({value:r,schema:t})}catch(r){return{success:!1,error:k.isInstance(r)?r:new k({text:e,cause:r}),rawValue:void 0}}}function Ar(e){try{return x(e),!0}catch{return!1}}function pt({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new je).pipeThrough(new TransformStream({async transform({data:r},a){r!=="[DONE]"&&a.enqueue(await Ee({text:r,schema:t}))}}))}async function Er({provider:e,providerOptions:t,schema:r}){if(t?.[e]==null)return;const a=await j({value:t[e],schema:r});if(!a.success)throw new X({argument:"providerOptions",message:`invalid ${e} provider options`,cause:a.error});return a.value}var vt=()=>globalThis.fetch,$r=async({url:e,headers:t,body:r,failedResponseHandler:a,successfulResponseHandler:n,abortSignal:s,fetch:i})=>$e({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(r),values:r},failedResponseHandler:a,successfulResponseHandler:n,abortSignal:s,fetch:i}),Ir=async({url:e,headers:t,formData:r,failedResponseHandler:a,successfulResponseHandler:n,abortSignal:s,fetch:i})=>$e({url:e,headers:t,body:{content:r,values:Object.fromEntries(r.entries())},failedResponseHandler:a,successfulResponseHandler:n,abortSignal:s,fetch:i}),$e=async({url:e,headers:t={},body:r,successfulResponseHandler:a,failedResponseHandler:n,abortSignal:s,fetch:i=vt()})=>{try{const o=await i(e,{method:"POST",headers:at(t,`ai-sdk/provider-utils/${nt}`,tt()),body:r.content,signal:s}),l=_(o);if(!o.ok){let u;try{u=await n({response:o,url:e,requestBodyValues:r.values})}catch(v){throw I(v)||g.isInstance(v)?v:new g({message:"Failed to process error response",cause:v,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:r.values})}throw u.value}try{return await a({response:o,url:e,requestBodyValues:r.values})}catch(u){throw u instanceof Error&&(I(u)||g.isInstance(u))?u:new g({message:"Failed to process successful response",cause:u,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:r.values})}}catch(o){throw et({error:o,url:e,requestBodyValues:r.values})}};function Or({id:e,name:t,inputSchema:r}){return({execute:a,outputSchema:n,toModelOutput:s,onInputStart:i,onInputDelta:o,onInputAvailable:l,...u})=>({type:"provider-defined",id:e,name:t,args:u,inputSchema:r,outputSchema:n,execute:a,toModelOutput:s,onInputStart:i,onInputDelta:o,onInputAvailable:l})}function Tr({id:e,name:t,inputSchema:r,outputSchema:a}){return({execute:n,toModelOutput:s,onInputStart:i,onInputDelta:o,onInputAvailable:l,...u})=>({type:"provider-defined",id:e,name:t,args:u,inputSchema:r,outputSchema:a,execute:n,toModelOutput:s,onInputStart:i,onInputDelta:o,onInputAvailable:l})}async function Zr(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var xr=({errorSchema:e,errorToMessage:t,isRetryable:r})=>async({response:a,url:n,requestBodyValues:s})=>{const i=await a.text(),o=_(a);if(i.trim()==="")return{responseHeaders:o,value:new g({message:a.statusText,url:n,requestBodyValues:s,statusCode:a.status,responseHeaders:o,responseBody:i,isRetryable:r?.(a)})};try{const l=await ft({text:i,schema:e});return{responseHeaders:o,value:new g({message:t(l),url:n,requestBodyValues:s,statusCode:a.status,responseHeaders:o,responseBody:i,data:l,isRetryable:r?.(a,l)})}}catch{return{responseHeaders:o,value:new g({message:a.statusText,url:n,requestBodyValues:s,statusCode:a.status,responseHeaders:o,responseBody:i,isRetryable:r?.(a)})}}},jr=e=>async({response:t})=>{const r=_(t);if(t.body==null)throw new Ce({});return{responseHeaders:r,value:pt({stream:t.body,schema:e})}},Dr=e=>async({response:t,url:r,requestBodyValues:a})=>{const n=await t.text(),s=await Ee({text:n,schema:e}),i=_(t);if(!s.success)throw new g({message:"Invalid JSON response",cause:s.error,statusCode:t.status,responseHeaders:i,responseBody:n,url:r,requestBodyValues:a});return{responseHeaders:i,value:s.value,rawValue:s.rawValue}},Nr=()=>async({response:e,url:t,requestBodyValues:r})=>{const a=_(e);if(!e.body)throw new g({message:"Response body is empty",url:t,requestBodyValues:r,statusCode:e.status,responseHeaders:a,responseBody:void 0});try{const n=await e.arrayBuffer();return{responseHeaders:a,value:new Uint8Array(n)}}catch(n){throw new g({message:"Failed to read response as array buffer",url:t,requestBodyValues:r,statusCode:e.status,responseHeaders:a,responseBody:void 0,cause:n})}},yt=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")},ht=Symbol("Let zodToJsonSchema decide on which parser to use"),M={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},gt=e=>typeof e=="string"?{...M,name:e}:{...M,...e};function p(){return{}}function bt(e,t){var r,a,n;const s={type:"array"};return(r=e.type)!=null&&r._def&&((n=(a=e.type)==null?void 0:a._def)==null?void 0:n.typeName)!==c.ZodAny&&(s.items=d(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(s.minItems=e.minLength.value),e.maxLength&&(s.maxItems=e.maxLength.value),e.exactLength&&(s.minItems=e.exactLength.value,s.maxItems=e.exactLength.value),s}function _t(e){const t={type:"integer",format:"int64"};if(!e.checks)return t;for(const r of e.checks)switch(r.kind){case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function wt(){return{type:"boolean"}}function Ie(e,t){return d(e.type._def,t)}var Pt=(e,t)=>d(e.innerType._def,t);function Oe(e,t,r){const a=r??t.dateStrategy;if(Array.isArray(a))return{anyOf:a.map((n,s)=>Oe(e,t,n))};switch(a){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return kt(e)}}var kt=e=>{const t={type:"integer",format:"unix-time"};for(const r of e.checks)switch(r.kind){case"min":t.minimum=r.value;break;case"max":t.maximum=r.value;break}return t};function St(e,t){return{...d(e.innerType._def,t),default:e.defaultValue()}}function At(e,t){return t.effectStrategy==="input"?d(e.schema._def,t):p()}function Et(e){return{type:"string",enum:Array.from(e.values)}}var $t=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function It(e,t){const r=[d(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),d(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(n=>!!n),a=[];return r.forEach(n=>{if($t(n))a.push(...n.allOf);else{let s=n;if("additionalProperties"in n&&n.additionalProperties===!1){const{additionalProperties:i,...o}=n;s=o}a.push(s)}}),a.length?{allOf:a}:void 0}function Ot(e){const t=typeof e.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(e.value)?"array":"object"}:{type:t==="bigint"?"integer":t,const:e.value}}var A=void 0,y={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(A===void 0&&(A=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),A),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Te(e,t){const r={type:"string"};if(e.checks)for(const a of e.checks)switch(a.kind){case"min":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,a.value):a.value;break;case"max":r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,a.value):a.value;break;case"email":switch(t.emailStrategy){case"format:email":h(r,"email",a.message,t);break;case"format:idn-email":h(r,"idn-email",a.message,t);break;case"pattern:zod":f(r,y.email,a.message,t);break}break;case"url":h(r,"uri",a.message,t);break;case"uuid":h(r,"uuid",a.message,t);break;case"regex":f(r,a.regex,a.message,t);break;case"cuid":f(r,y.cuid,a.message,t);break;case"cuid2":f(r,y.cuid2,a.message,t);break;case"startsWith":f(r,RegExp(`^${E(a.value,t)}`),a.message,t);break;case"endsWith":f(r,RegExp(`${E(a.value,t)}$`),a.message,t);break;case"datetime":h(r,"date-time",a.message,t);break;case"date":h(r,"date",a.message,t);break;case"time":h(r,"time",a.message,t);break;case"duration":h(r,"duration",a.message,t);break;case"length":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,a.value):a.value,r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,a.value):a.value;break;case"includes":{f(r,RegExp(E(a.value,t)),a.message,t);break}case"ip":{a.version!=="v6"&&h(r,"ipv4",a.message,t),a.version!=="v4"&&h(r,"ipv6",a.message,t);break}case"base64url":f(r,y.base64url,a.message,t);break;case"jwt":f(r,y.jwt,a.message,t);break;case"cidr":{a.version!=="v6"&&f(r,y.ipv4Cidr,a.message,t),a.version!=="v4"&&f(r,y.ipv6Cidr,a.message,t);break}case"emoji":f(r,y.emoji(),a.message,t);break;case"ulid":{f(r,y.ulid,a.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{h(r,"binary",a.message,t);break}case"contentEncoding:base64":{r.contentEncoding="base64";break}case"pattern:zod":{f(r,y.base64,a.message,t);break}}break}case"nanoid":f(r,y.nanoid,a.message,t)}return r}function E(e,t){return t.patternStrategy==="escape"?Zt(e):e}var Tt=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Zt(e){let t="";for(let r=0;r<e.length;r++)Tt.has(e[r])||(t+="\\"),t+=e[r];return t}function h(e,t,r,a){var n;e.format||(n=e.anyOf)!=null&&n.some(s=>s.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...r&&a.errorMessages&&{errorMessage:{format:r}}})):e.format=t}function f(e,t,r,a){var n;e.pattern||(n=e.allOf)!=null&&n.some(s=>s.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:L(t,a),...r&&a.errorMessages&&{errorMessage:{pattern:r}}})):e.pattern=L(t,a)}function L(e,t){var r;if(!t.applyRegexFlags||!e.flags)return e.source;const a={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},n=a.i?e.source.toLowerCase():e.source;let s="",i=!1,o=!1,l=!1;for(let u=0;u<n.length;u++){if(i){s+=n[u],i=!1;continue}if(a.i){if(o){if(n[u].match(/[a-z]/)){l?(s+=n[u],s+=`${n[u-2]}-${n[u]}`.toUpperCase(),l=!1):n[u+1]==="-"&&((r=n[u+2])!=null&&r.match(/[a-z]/))?(s+=n[u],l=!0):s+=`${n[u]}${n[u].toUpperCase()}`;continue}}else if(n[u].match(/[a-z]/)){s+=`[${n[u]}${n[u].toUpperCase()}]`;continue}}if(a.m){if(n[u]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(n[u]==="$"){s+=`($|(?=[\r
]))`;continue}}if(a.s&&n[u]==="."){s+=o?`${n[u]}\r
`:`[${n[u]}\r
]`;continue}s+=n[u],n[u]==="\\"?i=!0:o&&n[u]==="]"?o=!1:!o&&n[u]==="["&&(o=!0)}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return s}function Ze(e,t){var r,a,n,s,i,o;const l={type:"object",additionalProperties:(r=d(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))!=null?r:t.allowedAdditionalProperties};if(((a=e.keyType)==null?void 0:a._def.typeName)===c.ZodString&&((n=e.keyType._def.checks)!=null&&n.length)){const{type:u,...v}=Te(e.keyType._def,t);return{...l,propertyNames:v}}else{if(((s=e.keyType)==null?void 0:s._def.typeName)===c.ZodEnum)return{...l,propertyNames:{enum:e.keyType._def.values}};if(((i=e.keyType)==null?void 0:i._def.typeName)===c.ZodBranded&&e.keyType._def.type._def.typeName===c.ZodString&&((o=e.keyType._def.type._def.checks)!=null&&o.length)){const{type:u,...v}=Ie(e.keyType._def,t);return{...l,propertyNames:v}}}return l}function xt(e,t){if(t.mapStrategy==="record")return Ze(e,t);const r=d(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||p(),a=d(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||p();return{type:"array",maxItems:125,items:{type:"array",items:[r,a],minItems:2,maxItems:2}}}function jt(e){const t=e.values,a=Object.keys(e.values).filter(s=>typeof t[t[s]]!="number").map(s=>t[s]),n=Array.from(new Set(a.map(s=>typeof s)));return{type:n.length===1?n[0]==="string"?"string":"number":["string","number"],enum:a}}function Dt(){return{not:p()}}function Nt(){return{type:"null"}}var O={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Ft(e,t){const r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(a=>a._def.typeName in O&&(!a._def.checks||!a._def.checks.length))){const a=r.reduce((n,s)=>{const i=O[s._def.typeName];return i&&!n.includes(i)?[...n,i]:n},[]);return{type:a.length>1?a:a[0]}}else if(r.every(a=>a._def.typeName==="ZodLiteral"&&!a.description)){const a=r.reduce((n,s)=>{const i=typeof s._def.value;switch(i){case"string":case"number":case"boolean":return[...n,i];case"bigint":return[...n,"integer"];case"object":if(s._def.value===null)return[...n,"null"];case"symbol":case"undefined":case"function":default:return n}},[]);if(a.length===r.length){const n=a.filter((s,i,o)=>o.indexOf(s)===i);return{type:n.length>1?n:n[0],enum:r.reduce((s,i)=>s.includes(i._def.value)?s:[...s,i._def.value],[])}}}else if(r.every(a=>a._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((a,n)=>[...a,...n._def.values.filter(s=>!a.includes(s))],[])};return Mt(e,t)}var Mt=(e,t)=>{const r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((a,n)=>d(a._def,{...t,currentPath:[...t.currentPath,"anyOf",`${n}`]})).filter(a=>!!a&&(!t.strictUnions||typeof a=="object"&&Object.keys(a).length>0));return r.length?{anyOf:r}:void 0};function Lt(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[O[e.innerType._def.typeName],"null"]};const r=d(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function Rt(e){const t={type:"number"};if(!e.checks)return t;for(const r of e.checks)switch(r.kind){case"int":t.type="integer";break;case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function Ct(e,t){const r={type:"object",properties:{}},a=[],n=e.shape();for(const i in n){let o=n[i];if(o===void 0||o._def===void 0)continue;const l=Bt(o),u=d(o._def,{...t,currentPath:[...t.currentPath,"properties",i],propertyPath:[...t.currentPath,"properties",i]});u!==void 0&&(r.properties[i]=u,l||a.push(i))}a.length&&(r.required=a);const s=zt(e,t);return s!==void 0&&(r.additionalProperties=s),r}function zt(e,t){if(e.catchall._def.typeName!=="ZodNever")return d(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function Bt(e){try{return e.isOptional()}catch{return!0}}var Ut=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return d(e.innerType._def,t);const a=d(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return a?{anyOf:[{not:p()},a]}:p()},Jt=(e,t)=>{if(t.pipeStrategy==="input")return d(e.in._def,t);if(t.pipeStrategy==="output")return d(e.out._def,t);const r=d(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),a=d(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,a].filter(n=>n!==void 0)}};function Ht(e,t){return d(e.type._def,t)}function Vt(e,t){const a={type:"array",uniqueItems:!0,items:d(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(a.minItems=e.minSize.value),e.maxSize&&(a.maxItems=e.maxSize.value),a}function qt(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((r,a)=>d(r._def,{...t,currentPath:[...t.currentPath,"items",`${a}`]})).reduce((r,a)=>a===void 0?r:[...r,a],[]),additionalItems:d(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((r,a)=>d(r._def,{...t,currentPath:[...t.currentPath,"items",`${a}`]})).reduce((r,a)=>a===void 0?r:[...r,a],[])}}function Gt(){return{not:p()}}function Kt(){return p()}var Wt=(e,t)=>d(e.innerType._def,t),Qt=(e,t,r)=>{switch(t){case c.ZodString:return Te(e,r);case c.ZodNumber:return Rt(e);case c.ZodObject:return Ct(e,r);case c.ZodBigInt:return _t(e);case c.ZodBoolean:return wt();case c.ZodDate:return Oe(e,r);case c.ZodUndefined:return Gt();case c.ZodNull:return Nt();case c.ZodArray:return bt(e,r);case c.ZodUnion:case c.ZodDiscriminatedUnion:return Ft(e,r);case c.ZodIntersection:return It(e,r);case c.ZodTuple:return qt(e,r);case c.ZodRecord:return Ze(e,r);case c.ZodLiteral:return Ot(e);case c.ZodEnum:return Et(e);case c.ZodNativeEnum:return jt(e);case c.ZodNullable:return Lt(e,r);case c.ZodOptional:return Ut(e,r);case c.ZodMap:return xt(e,r);case c.ZodSet:return Vt(e,r);case c.ZodLazy:return()=>e.getter()._def;case c.ZodPromise:return Ht(e,r);case c.ZodNaN:case c.ZodNever:return Dt();case c.ZodEffects:return At(e,r);case c.ZodAny:return p();case c.ZodUnknown:return Kt();case c.ZodDefault:return St(e,r);case c.ZodBranded:return Ie(e,r);case c.ZodReadonly:return Wt(e,r);case c.ZodCatch:return Pt(e,r);case c.ZodPipeline:return Jt(e,r);case c.ZodFunction:case c.ZodVoid:case c.ZodSymbol:return;default:return(a=>{})()}};function d(e,t,r=!1){var a;const n=t.seen.get(e);if(t.override){const l=(a=t.override)==null?void 0:a.call(t,e,t,n,r);if(l!==ht)return l}if(n&&!r){const l=Xt(n,t);if(l!==void 0)return l}const s={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,s);const i=Qt(e,e.typeName,t),o=typeof i=="function"?d(i(),t):i;if(o&&Yt(e,t,o),t.postProcess){const l=t.postProcess(o,e,t);return s.jsonSchema=o,l}return s.jsonSchema=o,o}var Xt=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:yt(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((r,a)=>t.currentPath[a]===r)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),p()):t.$refStrategy==="seen"?p():void 0}},Yt=(e,t,r)=>(e.description&&(r.description=e.description),r),er=e=>{const t=gt(e),r=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([a,n])=>[n._def,{def:n._def,path:[...t.basePath,t.definitionPath,a],jsonSchema:void 0}]))}},tr=(e,t)=>{var r;const a=er(t);let n=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((u,[v,xe])=>{var N;return{...u,[v]:(N=d(xe._def,{...a,currentPath:[...a.basePath,a.definitionPath,v]},!0))!=null?N:p()}},{}):void 0;const s=typeof t=="string"?t:t?.nameStrategy==="title"?void 0:t?.name,i=(r=d(e._def,s===void 0?a:{...a,currentPath:[...a.basePath,a.definitionPath,s]},!1))!=null?r:p(),o=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;o!==void 0&&(i.title=o);const l=s===void 0?n?{...i,[a.definitionPath]:n}:i:{$ref:[...a.$refStrategy==="relative"?[]:a.basePath,a.definitionPath,s].join("/"),[a.definitionPath]:{...n,[s]:i}};return l.$schema="http://json-schema.org/draft-07/schema#",l},rr=tr;function ar(e,t){var r;const a=(r=void 0)!=null?r:!1;return D(()=>rr(e,{$refStrategy:a?"root":"none"}),{validate:async n=>{const s=await e.safeParseAsync(n);return s.success?{success:!0,value:s.data}:{success:!1,error:s.error}}})}function nr(e,t){var r;const a=(r=void 0)!=null?r:!1;return D(()=>De(e,{target:"draft-7",io:"output",reused:a?"ref":"inline"}),{validate:async n=>{const s=await Ne(e,n);return s.success?{success:!0,value:s.data}:{success:!1,error:s.error}}})}function sr(e){return"_zod"in e}function ir(e,t){return sr(e)?nr(e):ar(e)}var T=Symbol.for("vercel.ai.schema");function Fr(e){let t;return()=>(t==null&&(t=e()),t)}function D(e,{validate:t}={}){return{[T]:!0,_type:void 0,[S]:!0,get jsonSchema(){return typeof e=="function"&&(e=e()),e},validate:t}}function or(e){return typeof e=="object"&&e!==null&&T in e&&e[T]===!0&&"jsonSchema"in e&&"validate"in e}function Mr(e){return e==null?D({properties:{},additionalProperties:!1}):or(e)?e:typeof e=="function"?e():ir(e)}var{btoa:ur,atob:cr}=globalThis;function Lr(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),r=cr(t);return Uint8Array.from(r,a=>a.codePointAt(0))}function lr(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return ur(t)}function Rr(e){return e instanceof Uint8Array?lr(e):e}function Cr(e){return e?.replace(/\/$/,"")}export{g as A,rt as B,tt as C,Mr as D,_ as E,Ce as F,Ee as G,j as H,pr as I,vr as N,yr as T,hr as U,at as a,Tr as b,Or as c,gr as d,$r as e,Dr as f,br as g,jr as h,_r as i,Fr as j,Rr as k,wr as l,xr as m,Ar as n,Lr as o,Er as p,kr as q,Zr as r,Ir as s,fr as t,Nr as u,mt as v,Cr as w,Sr as x,Pr as y,ir as z};
//# sourceMappingURL=index-DnAsjnwa.js.map
